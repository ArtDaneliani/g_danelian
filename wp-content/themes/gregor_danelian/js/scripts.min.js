// header navbar
// ---------Responsive-navbar-active-animation-----------
/*$(document).ready(function(){
    let arrURL = ['paintings','collages'];
    $.each(arrURL,function(index,value){
        if(window.location.pathname.replace('/','') == value) {
            console.log($(this));
            // $('.sub-menu li').parent().parent().find('.nav-item').toggleClass('active');
        }
    });
});*/
if($(window).width() < 765) {
    function navbar(){
        if ($("header.header").length) {
            let tabsNewAnim = $('#navbarSupportedContent');
            let selectorNewAnim = $('#navbarSupportedContent').find('li').length;
            let activeItemNewAnim = tabsNewAnim.find('.nav-item.active');
            // let activeWidthNewAnimHeight = activeItemNewAnim.innerHeight();
            let activeWidthNewAnimWidth = activeItemNewAnim.innerWidth();
            let itemPosNewAnimTop = activeItemNewAnim.position();
            // let itemPosNewAnimLeft = activeItemNewAnim.position();
            $(".hori-selector").css({
                "top": (itemPosNewAnimTop.top + 40) + "px",
                // "left": itemPosNewAnimLeft.left + "px",
                // "height": activeWidthNewAnimHeight + "px",
                "width": activeWidthNewAnimWidth + "px"
            });
            $("#navbarSupportedContent").on("click", "li", function (e) {
                $('#navbarSupportedContent ul li').removeClass("active");
                $(this).addClass('active');
                // let activeWidthNewAnimHeight = $(this).innerHeight();
                let activeWidthNewAnimWidth = $(this).innerWidth();
                let itemPosNewAnimTop = $(this).position();
                // let itemPosNewAnimLeft = $(this).position();
                $(".hori-selector").css({
                    "top": (itemPosNewAnimTop.top + 40) + "px",
                    // "left": itemPosNewAnimLeft.left + "px",
                    // "height": activeWidthNewAnimHeight + "px",
                    "width": activeWidthNewAnimWidth + "px"
                });
            });
        }
    }
}
$(document).ready(function(){
    if($(window).width() < 765) {
        if ($("header.header").length) {
            setTimeout(function () {
                navbar();
            });
        }
    }
});
if($(window).width() < 765) {
    $(window).on('resize', function(){
        setTimeout(function(){ navbar(); }, 300);
    });
    $(".navbar-toggler").click(function(){
        $(".navbar-collapse").slideToggle(300);
        setTimeout(function(){ navbar(); });
    });
}


// --------------add active class-on another-page move----------
$(document).ready(function($){
    // Get current path and find target link
    var path = window.location.pathname.split( '/' );
    var path = path[1];
    // Устанавливаем УРЛ по умолчанию если пустой
    if ( path == '' ) {
        path = 'index.html';
    }
    if ($("header.header").length) {
        //добавляем класс Active в меню по текущему урлу
        let target = $('#navbarSupportedContent ul li a[href="/' + path + '"]');
            target.parent().addClass('active'); // Add active class to target link
    }
});
//hover dropdown menu
if($(window).width() > 981) {
    let isSiblingHovered = false;
    $('.dropdown-menu1').hover( function () {
            $(this).siblings('.sub-menu').delay(300).slideDown();
        },
        function () {
            var current = $(this);
            setTimeout(function(){
                if(!isSiblingHovered){
                    current.siblings('.sub-menu').stop().slideUp();
                }
            }, 2000);
        });
    $('body').on("mouseleave", ".sub-menu", function() {
        isSiblingHovered = false;
        $('.sub-menu').stop().slideUp();
    });
    $('body').on("mouseenter", ".sub-menu", function() {
        isSiblingHovered = true;
    });
}

// Add active class on another page linked
// ==========================================
// $(window).on('load',function () {
//     let current = location.pathname;
//     console.log(current);
//     $('#navbarSupportedContent ul li a').each(function(){
//         let $this = $(this);
//         // if the current path is like this link, make it active
//         if($this.attr('href').indexOf(current) !== -1){
//             $this.parent().addClass('active');
//             $this.parents('.menu-submenu').addClass('show-dropdown');
//             $this.parents('.menu-submenu').parent().addClass('active');
//         }else{
//             $this.parent().removeClass('active');
//         }
//     })
// });


// ------------------------mob-menu------------------
$(function(){
    if($(window).width() < 981) {
        $(".navbar-nav li>a").on("click", function (e) {
            
            if ($(this).parent().find('ul').length > 0) {
                e.preventDefault();
                var menu = $(this).closest('.navbar-nav');
        	
        	if (false == $(this).next().is(':visible')) {
        		menu.find('li').removeClass('slide active');
        		menu.find('ul').slideUp();
        	}
        	$(this).next().slideToggle();
        	$(this).parent().addClass('slide'); 
                
            }
        });
    }
});

 /*-------MOB MENU---------*/
        // $(window).width() < 981 && $(".tabs__nav-item").on("click", function () {
        //         $(".tabs__content_slide").slideUp(400), $(this).closest(".tabs__nav .tabs__nav-slide").find(".tabs__content_slide").stop().slideToggle(400), $(this).toggleClass("active").parent().siblings().children().removeClass("active");
        //     });  
        // const t = document.querySelector(".header__inner_mob"),
        //       i = document.querySelector(".mob-menu__btn"),
        //       n = document.querySelector(".mob-menu__btn_close"),
        //       r = document.querySelector(".page-bg_mob"),
        //       a = document.querySelector(".menu__mob-btn"),
        //       s = document.body;
        //     i &&  
        //         i.addEventListener("click", (e) => {
        //             i.classList.toggle("active"), t.classList.toggle("active"), s.classList.toggle("over-hide"), n.classList.toggle("active"), r.classList.toggle("active");
        //         }),
        //     n &&
        //         n.addEventListener("click", (e) => {
        //             i.classList.toggle("active"), n.classList.toggle("active"), t.classList.remove("active"), s.classList.remove("over-hide"), r.classList.remove("active");
        //         }),
        //     a &&
        //         a.addEventListener("click", (e) => {
        //             i.classList.toggle("active"), n.classList.toggle("active"), t.classList.remove("active"), s.classList.remove("over-hide"), r.classList.remove("active");
        //         }),
        //     r &&
        //         r.addEventListener("click",
        //         (e) => {
        //             t.classList.contains("active") && (i.classList.remove("active"),
        //             t.classList.remove("active"),
        //             r.classList.remove("active"),
        //             s.classList.remove("over-hide"));
        //         }),  
        //     window.addEventListener("keydown", (e) => {
        //         t.classList.contains("active") && 27 === e.keyCode && (i.classList.remove("active"),
        //         t.classList.remove("active"),
        //         r.classList.remove("active"),
        //         s.classList.remove("over-hide"));
        //     }) 
            
/*------- END MOB MENU---------*/ 






























